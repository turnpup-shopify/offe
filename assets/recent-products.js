class RecentProducts extends HTMLElement{constructor(){super()}connectedCallback(){this.grid_container=this.querySelector(".recent-products--grid"),this.fragment=new DocumentFragment,this.spinner=this.querySelector(".recent-products--spinner"),this.storage=JSON.parse(localStorage.getItem(theme.local_storage.recent_products)),this.storage?this.load():this.style.display="none"}load(){var t=this.storage.map(t=>this.renderProductItem(t));Promise.allSettled(t).then(()=>this.productsLoaded())}async renderProductItem(t){const e=await fetch(theme.urls.root+`/products/${t}?view=ajax-item`);var r,s;e.ok&&(r=await e.text(),s=theme.utils.parseHtml(r,".product--root"),this.fragment.prepend(s))}productsLoaded(){this.grid_container.prepend(this.fragment),this.grid_container.removeAttribute("style"),this.spinner.style.display="none",this.grid_container.trigger("productsUpdated")}}const recentProductsEl=customElements.get("recent-products-root");recentProductsEl||customElements.define("recent-products-root",RecentProducts);